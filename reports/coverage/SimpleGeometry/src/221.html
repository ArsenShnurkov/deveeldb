<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\deveel\deveeldb\src\deveeldb\deveel.data.sql\schemainfo.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// 
//  Copyright 2010-2015 Deveel
// 
//    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
//    you may not use this file except in compliance with the License.
//    You may obtain a copy of the License at
// 
//        http://www.apache.org/licenses/LICENSE-2.0
// 
//    Unless required by applicable law or agreed to in writing, software
//    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
//    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//    See the License for the specific language governing permissions and
//    limitations under the License.
//

using System;
using System.Globalization;

namespace Deveel.Data.Sql {
	/// &lt;summary&gt;
	/// Describes the properties of a schema in a database system.
	/// &lt;/summary&gt;
	/// &lt;remarks&gt;
	/// &lt;para&gt;
	/// A schema is a collection of database objects (for example
	/// &lt;c&gt;TABLE&lt;/c&gt;, &lt;c&gt;VIEW&lt;/c&gt;, &lt;c&gt;TYPE&lt;/c&gt;, &lt;c&gt;TRIEGGER&lt;/c&gt;, etc.).
	/// &lt;/para&gt;
	/// &lt;para&gt;
	/// It is possible for a schema to specify additional metadata
	/// information, such as the culture that will be used by default
	/// to collate strings in comparisons.
	/// &lt;/para&gt;
	/// &lt;para&gt;
	/// It is not possible to define more than one schema with the same
	/// name in a database.
	/// &lt;/para&gt;
	/// &lt;/remarks&gt;
	public sealed class SchemaInfo : IObjectInfo {
		private CompareInfo comparer;

		/// &lt;summary&gt;
		/// Constructs the schema with the given name
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;name&quot;&gt;The name that identifies the schema.&lt;/param&gt;
		/// &lt;param name=&quot;type&quot;&gt;The type of the schema to create.&lt;/param&gt;
		public SchemaInfo(string name, string type) {
			if (String.IsNullOrEmpty(name))
				throw new ArgumentNullException(&quot;name&quot;);

			Name = name;
			Type = type;
		}

		DbObjectType IObjectInfo.ObjectType {
			get { return DbObjectType.Schema; }
		}


		ObjectName IObjectInfo.FullName {
			get { return new ObjectName(Name); }
		}

		/// &lt;summary&gt;
		/// Gets the name of the schema.
		/// &lt;/summary&gt;
		public string Name { get; private set; }

		/// &lt;summary&gt;
		/// Gets the type of the schema that defines the kind of objects it
		/// can contains.
		/// &lt;/summary&gt;
		public string Type { get; private set; }

		/// &lt;summary&gt;
		/// Gets the culture that will be applied to string
		/// comparisons, when not explicitly defined by types.
		/// &lt;/summary&gt;
		public string Culture { get; set; }

		/// &lt;summary&gt;
		/// Compares two strngs given using the culture set in the schema.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;s1&quot;&gt;The first string to compare.&lt;/param&gt;
		/// &lt;param name=&quot;s2&quot;&gt;The second argument of the comparison.&lt;/param&gt;
		/// &lt;returns&gt;
		/// Returns an integer value of 1 if the fist string is greather than the second,
		/// -1 if the second string is greather than the first one, or 0 if the
		/// two strings are equal.
		/// &lt;/returns&gt;
		/// &lt;seealso cref=&quot;Compare(string, string, bool)&quot;/&gt;
		public int Compare(string s1, string s2) {
			return Compare(s1, s2, false);
		}

		/// &lt;summary&gt;
		/// Compares two strngs given using the culture set in the schema.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;s1&quot;&gt;The first string to compare.&lt;/param&gt;
		/// &lt;param name=&quot;s2&quot;&gt;The second argument of the comparison.&lt;/param&gt;
		/// &lt;param name=&quot;ignoreCase&quot;&gt;Indicates whether to ignore the case of strings or not.&lt;/param&gt;
		/// &lt;remarks&gt;
		/// If the &lt;see cref=&quot;Culture&quot;/&gt; metadata was not set in the schema, the
		/// two strings will be compared using the invariant culture.
		/// &lt;/remarks&gt;
		/// &lt;returns&gt;
		/// Returns an integer value of 1 if the fist string is greather than the second,
		/// -1 if the second string is greather than the first one, or 0 if the
		/// two strings are equal.
		/// &lt;/returns&gt;
		public int Compare(string s1, string s2, bool ignoreCase) {
			var options = ignoreCase ? CompareOptions.OrdinalIgnoreCase : CompareOptions.Ordinal;

			if (String.IsNullOrEmpty(Culture))
				return CultureInfo.InvariantCulture.CompareInfo.Compare(s1, s2, options);

			if (comparer == null)
				comparer = new CultureInfo(Culture).CompareInfo;

			return comparer.Compare(s1, s2, options);
		}
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[49,5,49,45,0],[93,4,93,34,0],[112,4,112,89,0],[114,4,114,38,0],[115,5,115,78,0],[117,4,117,25,0],[118,5,118,53,0],[120,4,120,45,0],[47,3,47,46,1],[48,4,48,35,1],[51,4,51,16,1],[52,4,52,16,1],[53,3,53,4,1],[56,10,56,37,1],[61,10,61,38,1]]);
    </script>
  </body>
</html>