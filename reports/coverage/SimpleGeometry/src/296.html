<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\deveel\deveeldb\src\deveeldb\deveel.data.store\objectid.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// 
//  Copyright 2010-2015 Deveel
// 
//    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
//    you may not use this file except in compliance with the License.
//    You may obtain a copy of the License at
// 
//        http://www.apache.org/licenses/LICENSE-2.0
// 
//    Unless required by applicable law or agreed to in writing, software
//    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
//    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//    See the License for the specific language governing permissions and
//    limitations under the License.
//

using System;

namespace Deveel.Data.Store {
	/// &lt;summary&gt;
	/// A unique identifier of an object within a database system, 
	/// that is composed by a reference to the store it belongs to
	/// and the address of the object itself within the store.
	/// &lt;/summary&gt;
	/// &lt;remarks&gt;
	/// It could happen that an object identifier is replicated
	/// by multiple stores, but the distinction is made by
	/// store: there cannot be two objects in the same store
	/// having the same identifier.
	/// &lt;/remarks&gt;
	[Serializable]
	public struct ObjectId : IEquatable&lt;ObjectId&gt; {
		/// &lt;summary&gt;
		/// Constructs the &lt;see cref=&quot;ObjectId&quot;/&gt; with the
		/// given references to the store and the address.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;storeId&quot;&gt;The id of the store where the object belongs&lt;/param&gt;
		/// &lt;param name=&quot;id&quot;&gt;The unique identifier of the object within the store.&lt;/param&gt;
		public ObjectId(int storeId, long id)
			: this() {
			if (storeId &lt; 0)
				throw new ArgumentOutOfRangeException(&quot;storeId&quot;);
			if (id &lt; 0)
				throw new ArgumentOutOfRangeException(&quot;id&quot;);

			StoreId = storeId;
			Id = id;
		}

		/// &lt;summary&gt;
		/// Gets the unique identifier of the store that contains the object.
		/// &lt;/summary&gt;
		/// &lt;remarks&gt;
		/// This is a unique value on a global level: it cannot happen that
		/// two stores have the same identifier in the same database system.
		/// &lt;/remarks&gt;
		public int StoreId { get; private set; }

		/// &lt;summary&gt;
		/// Gets the unique identifier of the object within the containing store.
		/// &lt;/summary&gt;
		/// &lt;remarks&gt;
		/// This is a unique value on a store level: in the same store, it cannot
		/// happen to find two objects having the same identifier.
		/// &lt;/remarks&gt;
		public long Id { get; private set; }

		/// &lt;inheritdoc/&gt;
		public override bool Equals(object obj) {
			return Equals((ObjectId)obj);
		}

		/// &lt;inheritdoc/&gt;
		public override int GetHashCode() {
			return unchecked ((int)(StoreId*47 ^ Id));
		}

		/// &lt;inheritdoc/&gt;
		public bool Equals(ObjectId other) {
			return StoreId == other.StoreId &amp;&amp;
			       Id == other.Id;
		}

		/// &lt;inheritdoc/&gt;
		public override string ToString() {
			return String.Format(&quot;0x{0:X}:{1:X}&quot;, StoreId, Id);
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[42,5,42,54,0],[44,5,44,49,0],[70,4,70,33,0],[75,4,75,46,0],[80,4,81,26,0],[86,4,86,55,0],[40,6,40,12,1],[41,4,41,20,1],[43,4,43,15,1],[46,4,46,22,1],[47,4,47,12,1],[48,3,48,4,1]]);
    </script>
  </body>
</html>