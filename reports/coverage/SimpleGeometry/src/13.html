<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\deveel\deveeldb\src\deveeldb-nunit\deveel.data.sql.objects\sqlnumbertests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// 
//  Copyright 2010-2014 Deveel
// 
//    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
//    you may not use this file except in compliance with the License.
//    You may obtain a copy of the License at
// 
//        http://www.apache.org/licenses/LICENSE-2.0
// 
//    Unless required by applicable law or agreed to in writing, software
//    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
//    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//    See the License for the specific language governing permissions and
//    limitations under the License.

using System;

using NUnit.Framework;

namespace Deveel.Data.Sql.Objects {
	[TestFixture]
	[Category(&quot;SQL Objects&quot;)]
	[Category(&quot;Numbers&quot;)]
	public class SqlNumberTests {
		[Test]
		public void Create_FromInteger() {
			var value = new SqlNumber((int) 45993);
			Assert.IsFalse(value.IsNull);
			Assert.IsTrue(value.CanBeInt32);
			Assert.IsTrue(value.CanBeInt64);
			Assert.AreEqual(0, value.Scale);
			Assert.AreEqual(5, value.Precision);
			Assert.AreEqual(NumericState.None, value.State);
			Assert.AreEqual(1, value.Sign);
		}

		[Test]
		public void Create_FromBigInt() {
			var value = new SqlNumber(4599356655L);
			Assert.IsFalse(value.IsNull);
			Assert.IsFalse(value.CanBeInt32);
			Assert.IsTrue(value.CanBeInt64);
			Assert.AreEqual(0, value.Scale);
			Assert.AreEqual(10, value.Precision);
			Assert.AreEqual(NumericState.None, value.State);
			Assert.AreEqual(1, value.Sign);			
		}

		[Test]
		public void Create_FromDouble() {
			var value = new SqlNumber(459935.9803d);
			Assert.IsFalse(value.IsNull);
			Assert.IsFalse(value.CanBeInt32);
			Assert.IsFalse(value.CanBeInt64);
			Assert.AreEqual(28, value.Scale);
			Assert.AreEqual(34, value.Precision);
			Assert.AreEqual(NumericState.None, value.State);
			Assert.AreEqual(1, value.Sign);
		}

		[Test]
		public void Parse_BigDecimal() {
			var value = new SqlNumber();
			Assert.DoesNotThrow(() =&gt; value = SqlNumber.Parse(&quot;98356278.911288837773848500069994933229238e45789&quot;));
			Assert.IsFalse(value.IsNull);
			Assert.IsFalse(value.CanBeInt32);
			Assert.IsFalse(value.CanBeInt64);
			Assert.Greater(value.Precision, 40);
		}

		[Test]
		public void Convert_ToBoolean_Success() {
			var value = SqlNumber.One;
			var b = new SqlBoolean();
			Assert.DoesNotThrow(() =&gt; b = (SqlBoolean)Convert.ChangeType(value, typeof(SqlBoolean)));
			Assert.IsTrue(b);
		}
	}
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[27,4,27,43,1],[28,4,28,33,1],[29,4,29,36,1],[30,4,30,36,1],[31,4,31,36,1],[32,4,32,40,1],[33,4,33,52,1],[34,4,34,35,1],[35,3,35,4,1],[39,4,39,43,1],[40,4,40,33,1],[41,4,41,37,1],[42,4,42,36,1],[43,4,43,36,1],[44,4,44,41,1],[45,4,45,52,1],[46,4,46,35,1],[47,3,47,4,1],[51,4,51,44,1],[52,4,52,33,1],[53,4,53,37,1],[54,4,54,37,1],[55,4,55,37,1],[56,4,56,41,1],[57,4,57,52,1],[58,4,58,35,1],[59,3,59,4,1],[63,4,63,32,1],[64,4,64,30,1],[64,105,64,107,1],[65,4,65,33,1],[66,4,66,37,1],[67,4,67,37,1],[68,4,68,40,1],[69,3,69,4,1],[73,4,73,30,1],[74,4,74,29,1],[75,4,75,30,1],[75,91,75,93,1],[76,4,76,21,1],[77,3,77,4,1],[64,30,64,105,1],[75,30,75,91,1]]);
    </script>
  </body>
</html>